<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>Flappy Bird + Bindz Hack Menu</title>
<style>
html, body {
  margin: 0; padding: 0; overflow: hidden;
  background: #70c5ce; font-family: sans-serif;
}
canvas {
  display: block;
  margin: 0 auto;
  background: #70c5ce;
}
:root {
  --menu-w: 220px;
}

/* Floating cat button */
#toggleBtn {
  position: fixed;
  bottom: 20px; right: 20px;
  width: 60px; height: 60px;
  border-radius: 50%;
  background: url('https://i.ibb.co/m0nMmb2/cat.png') center/cover;
  cursor: pointer;
  z-index: 1007;
}

/* Menu wrapper */
.menu-wrap {
  position: fixed;
  right: 24px;
  top: 24px;
  width: var(--menu-w);
  z-index: 1006;
  display: none;
}

.menu-frame {
  position: relative;
  border-radius: 18px;
  padding: 4px;
  background: transparent;
}

.menu-frame::before {
  content: "";
  position: absolute;
  top: 0; left: 0; right: 0; bottom: 0;
  border-radius: 18px;
  padding: 3px;
  background: conic-gradient(
    #ff004c,
    #ff7a00,
    #ffd300,
    #2be7a1,
    #00c2ff,
    #7a5cff,
    #ff004c
  );
  -webkit-mask:
    linear-gradient(#000 0 0) content-box,
    linear-gradient(#000 0 0);
  -webkit-mask-composite: xor;
          mask-composite: exclude;
  pointer-events: none;
  animation: spin 3s linear infinite;
}

@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

/* actual menu content */
#hackMenu {
  border-radius: 14px;
  background: linear-gradient(180deg, rgba(10,10,10,0.95), rgba(20,20,20,0.95));
  color:#fff;
  padding:16px;
  box-shadow: 0 8px 30px rgba(0,0,0,0.5);
}
#hackMenu h3 { margin-top: 0; text-align: center; font-family: monospace; }
label { display:block; margin:8px 0; }

</style>
</head>
<body>

<canvas id="gameCanvas" width="480" height="640"></canvas>

<div id="toggleBtn"></div>

<div class="menu-wrap" id="menuWrap">
  <div class="menu-frame">
    <div id="hackMenu">
      <h3>Bindz Hack</h3>
      <label>
        Bay nhanh:
        <select id="speedHack">
          <option value="1">1x</option>
          <option value="2">2x</option>
          <option value="3">3x</option>
        </select>
      </label>
    </div>
  </div>
</div>

<script>
/* --- GAME --- */
const cvs = document.getElementById("gameCanvas");
const ctx = cvs.getContext("2d");

let frames = 0;
const DEGREE = Math.PI/180;

// load sprite
const birdImg = new Image();
birdImg.src = "https://i.ibb.co/YNV9Mqd/bird.png";

const bgImg = new Image();
bgImg.src = "https://i.ibb.co/s6vGZ6R/bg.png";

const fgImg = new Image();
fgImg.src = "https://i.ibb.co/ThKBLj8/fg.png";

const pipeNorth = new Image();
pipeNorth.src = "https://i.ibb.co/Wn1cFvy/pipe-North.png";

const pipeSouth = new Image();
pipeSouth.src = "https://i.ibb.co/b3z5vJ7/pipe-South.png";

let gameState = {
  current : 0,
  getReady : 0,
  game : 1,
  over : 2
}

cvs.addEventListener("click", function(evt){
  switch(gameState.current){
    case gameState.getReady:
      gameState.current = gameState.game;
      break;
    case gameState.game:
      bird.flap();
      break;
    case gameState.over:
      pipes.reset();
      bird.reset();
      gameState.current = gameState.getReady;
      break;
  }
});

document.addEventListener("keydown", function(e){
  if(e.code === "Space"){
    if(gameState.current === gameState.getReady){
      gameState.current = gameState.game;
    } else if(gameState.current === gameState.game){
      bird.flap();
    } else if(gameState.current === gameState.over){
      pipes.reset();
      bird.reset();
      gameState.current = gameState.getReady;
    }
  }
});

// bird
const bird = {
  x : 50,
  y : 150,
  w : 34,
  h : 26,
  radius : 12,
  frame : 0,
  gravity : 0.25,
  jump : 4.6,
  speed : 0,
  rotation : 0,

  draw : function(){
    ctx.drawImage(birdImg, this.x, this.y);
  },

  flap : function(){
    this.speed = -this.jump;
  },

  update: function(){
    if(gameState.current === gameState.getReady){
      this.y = 150;
      this.rotation = 0 * DEGREE;
    } else {
      this.speed += this.gravity;
      this.y += this.speed * speedHackVal;
      if(this.y + this.h/2 >= cvs.height - fg.h){
        this.y = cvs.height - fg.h - this.h/2;
        if(gameState.current === gameState.game){
          gameState.current = gameState.over;
        }
      }
      if(this.speed >= this.jump){
        this.rotation = 90 * DEGREE;
      } else {
        this.rotation = -25 * DEGREE;
      }
    }
  },

  reset: function(){
    this.speed = 0;
    this.y = 150;
  }
};

// foreground
const fg = {
  x : 0,
  y : cvs.height - 112,
  w : 224,
  h : 112,
  dx : 2,

  draw : function(){
    ctx.drawImage(fgImg, this.x, this.y);
    ctx.drawImage(fgImg, this.x + this.w, this.y);
  },

  update : function(){
    if(gameState.current === gameState.game){
      this.x = (this.x - this.dx) % (this.w);
    }
  }
};

// pipes
const pipes = {
  position : [],
  w : 52,
  h : 400,
  gap : 100,
  dx : 2,

  draw : function(){
    for(let i = 0; i < this.position.length; i++){
      let p = this.position[i];
      let topYPos = p.y;
      ctx.drawImage(pipeNorth, p.x, topYPos);
      ctx.drawImage(pipeSouth, p.x, topYPos + this.h + this.gap);
    }
  },

  update : function(){
    if(gameState.current !== gameState.game) return;
    if(frames % 100 === 0){
      this.position.push({
        x : cvs.width,
        y : -Math.floor(Math.random()*200) - 50
      });
    }
    for(let i = 0; i < this.position.length; i++){
      let p = this.position[i];
      p.x -= this.dx * speedHackVal;
      if(p.x + this.w <= 0){
        this.position.shift();
      }
      // collision
      if(
        bird.x + bird.w/2 > p.x && bird.x - bird.w/2 < p.x + this.w &&
        (bird.y - bird.h/2 < p.y + this.h ||
        bird.y + bird.h/2 > p.y + this.h + this.gap)
      ){
        gameState.current = gameState.over;
      }
    }
  },

  reset : function(){
    this.position = [];
  }
};

// draw
function draw(){
  ctx.fillStyle = "#70c5ce";
  ctx.fillRect(0,0,cvs.width,cvs.height);

  pipes.draw();
  fg.draw();
  bird.draw();
}

// update
function update(){
  bird.update();
  fg.update();
  pipes.update();
}

// loop
function loop(){
  update();
  draw();
  frames++;
  requestAnimationFrame(loop);
}

loop();

/* --- HACK MENU LOGIC --- */
let speedHackVal = 1;
document.getElementById("speedHack").addEventListener("change", function(){
  speedHackVal = parseInt(this.value);
});

const toggleBtn = document.getElementById("toggleBtn");
const menuWrap = document.getElementById("menuWrap");

toggleBtn.addEventListener("click", () => {
  menuWrap.style.display = menuWrap.style.display === "none" ? "block" : "none";
});
</script>

</body>
  </html>
